<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>تطبيق الدردشة - آزاد</title>
    <link rel="stylesheet" href="style.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- شاشة المصادقة -->
    <div id="authScreen" class="screen active">
        <div class="auth-container">
            <div class="auth-card">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-comment-dots"></i>
                    </div>
                    <h1>آزاد</h1>
                    <p class="tagline">تواصل بكل حرية</p>
                </div>
                
                <div class="auth-tabs">
                    <button class="tab-btn active" id="loginTab">تسجيل الدخول</button>
                    <button class="tab-btn" id="registerTab">إنشاء حساب</button>
                </div>
                
                <!-- نموذج تسجيل الدخول -->
                <form id="loginForm" class="auth-form active">
                    <div class="input-group">
                        <i class="fas fa-envelope"></i>
                        <input type="email" id="loginEmail" placeholder="البريد الإلكتروني" required>
                    </div>
                    
                    <div class="input-group">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="loginPassword" placeholder="كلمة المرور" required>
                        <button type="button" class="show-password">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-sign-in-alt"></i>
                        تسجيل الدخول
                    </button>
                </form>
                
                <!-- نموذج التسجيل -->
                <form id="registerForm" class="auth-form">
                    <div class="input-group">
                        <i class="fas fa-user"></i>
                        <input type="text" id="registerName" placeholder="الاسم الكامل" required>
                    </div>
                    
                    <div class="input-group">
                        <i class="fas fa-envelope"></i>
                        <input type="email" id="registerEmail" placeholder="البريد الإلكتروني" required>
                    </div>
                    
                    <div class="input-group">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="registerPassword" placeholder="كلمة المرور" required>
                        <button type="button" class="show-password">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    
                    <div class="input-group">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="registerConfirmPassword" placeholder="تأكيد كلمة المرور" required>
                    </div>
                    
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-user-plus"></i>
                        إنشاء حساب
                    </button>
                </form>
                
                <div class="auth-footer">
                    <p>بالاستمرار، أنت توافق على <a href="#">الشروط والأحكام</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- شاشة التطبيق الرئيسية -->
    <div id="mainScreen" class="screen">
        <!-- شريط التنقل العلوي -->
        <nav class="top-nav">
            <button class="menu-btn" id="menuBtn">
                <i class="fas fa-bars"></i>
            </button>
            
            <div class="app-title">
                <i class="fas fa-comment-dots"></i>
                <span>آزاد</span>
            </div>
            
            <div class="nav-actions">
                <button class="nav-btn" id="newChatBtn">
                    <i class="fas fa-plus"></i>
                </button>
                <button class="nav-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </nav>

        <!-- المحتوى الرئيسي -->
        <div class="main-content">
            <!-- الشريط الجانبي -->
            <aside class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <h3><i class="fas fa-comments"></i> المحادثات</h3>
                </div>
                
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchUser" placeholder="ابحث عن محادثة...">
                </div>
                
                <div class="chats-container" id="chatsList">
                    <!-- قائمة المحادثات ستظهر هنا -->
                    <div class="empty-chats">
                        <i class="fas fa-comment-slash"></i>
                        <p>لا توجد محادثات</p>
                        <button class="btn-secondary" id="startNewChatBtn">
                            ابدأ محادثة جديدة
                        </button>
                    </div>
                </div>
            </aside>

            <!-- منطقة المحادثة -->
            <main class="chat-area" id="chatArea">
                <div class="chat-header" id="chatHeader">
                    <div class="chat-info">
                        <div class="chat-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="chat-details">
                            <h3>اختر محادثة</h3>
                            <p>اختر محادثة لبدء المحادثة</p>
                        </div>
                    </div>
                </div>
                
                <div class="messages-container" id="messagesContainer">
                    <!-- الرسائل ستظهر هنا -->
                    <div class="welcome-message">
                        <div class="welcome-icon">
                            <i class="fas fa-comments"></i>
                        </div>
                        <h2>مرحبًا بك في آزاد</h2>
                        <p>اختر محادثة من القائمة الجانبية لبدء المحادثة</p>
                    </div>
                </div>
                
                <div class="message-input-area">
                    <div class="input-wrapper">
                        <button class="emoji-btn">
                            <i class="far fa-smile"></i>
                        </button>
                        <input type="text" id="messageInput" placeholder="اكتب رسالة..." disabled>
                        <button class="attachment-btn">
                            <i class="fas fa-paperclip"></i>
                        </button>
                    </div>
                    <button id="sendBtn" class="send-btn" disabled>
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </main>
        </div>
    </div>

    <!-- نافذة البحث -->
    <div id="searchModal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-search"></i> البحث عن مستخدم</h3>
                <button class="close-modal" id="closeSearchBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="search-input-wrapper">
                    <i class="fas fa-search"></i>
                    <input type="text" id="usernameSearch" placeholder="ابحث باسم المستخدم أو البريد الإلكتروني...">
                </div>
                
                <div class="search-results" id="searchResults">
                    <div class="empty-results">
                        <i class="fas fa-search"></i>
                        <p>اكتب للبحث عن مستخدمين</p>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn-secondary" id="cancelSearchBtn">إلغاء</button>
            </div>
        </div>
    </div>

    <!-- نافذة التحميل -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="spinner"></div>
            <p>جاري التحميل...</p>
        </div>
    </div>

    <!-- الرسائل المنبثقة -->
    <div id="notificationContainer"></div>

    <script type="module" src="firebase-config.js"></script>
    <script type="module" src="main.js"></script>
</body>
</html>
