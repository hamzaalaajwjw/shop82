<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>a3len - الصفحة الرئيسية</title>
<link rel="stylesheet" href="style.css">
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script>
const firebaseConfig = {
  apiKey: "AIzaSyAl3XunFOwHpGw-4_VYyETMtoLgk4mnRpQ",
  authDomain: "a3len-3ad54.firebaseapp.com",
  databaseURL: "https://a3len-3ad54-default-rtdb.firebaseio.com",
  projectId: "a3len-3ad54",
  storageBucket: "a3len-3ad54.firebasestorage.app",
  messagingSenderId: "767338034080",
  appId: "1:767338034080:web:801d77fb74c0aa56e92ac5"
};
firebase.initializeApp(firebaseConfig);
</script>
</head>
<body>
<div class="sidebar">
  <h2>a3len</h2>
  <ul>
    <li onclick="location.href='index.html'">الرئيسية</li>
    <li onclick="location.href='login.html'">تسجيل الدخول</li>
    <li onclick="location.href='register.html'">إنشاء حساب</li>
  </ul>
</div>
<div class="content">
  <h1>أحدث قطع البيسي</h1>
  <input type="text" id="search" placeholder="ابحث عن قطعة..." onkeyup="filterPosts()">
  <div id="posts" class="posts"></div>
</div>
<script>
const postsContainer = document.getElementById('posts');
function loadPosts() {
  firebase.database().ref('posts').on('value', snapshot => {
    postsContainer.innerHTML = '';
    snapshot.forEach(child => {
      const post = child.val();
      const postDiv = document.createElement('div');
      postDiv.className = 'post';
      postDiv.innerHTML = `<h3>${post.title}</h3><p>${post.shortDesc}</p><button onclick="location.href='post.html?id=${child.key}'">عرض التفاصيل</button>`;
      postsContainer.appendChild(postDiv);
    });
  });
}
function filterPosts() {
  const filter = document.getElementById('search').value.toLowerCase();
  document.querySelectorAll('.post').forEach(post => {
    const text = post.textContent.toLowerCase();
    post.style.display = text.includes(filter) ? '' : 'none';
  });
}
loadPosts();
</script>
</body>
</html>