<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>أفضل الجامعات</title>

<link rel="stylesheet" href="style.css">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
</head>
<body>

<header>⭐ أفضل 5 جامعات تقييم</header>

<div class="container">
    <ul id="topList"></ul>
</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyAl3XunFOwHpGw-4_VYyETMtoLgk4mnRpQ",
  authDomain: "a3len-3ad54.firebaseapp.com",
  databaseURL: "https://a3len-3ad54-default-rtdb.firebaseio.com",
  projectId: "a3len-3ad54",
  storageBucket: "a3len-3ad54.firebasestorage.app",
  messagingSenderId: "767338034080",
  appId: "1:767338034080:web:801d77fb74c0aa56e92ac5"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const topListEl = document.getElementById("topList");

// جلب جميع التقييمات ثم ترتيبها بحسب avg
db.ref("ratings").once("value", snapshot=>{
    const data = snapshot.val();
    if(!data) return;

    // تحويل البيانات لمصفوفة
    const arr = Object.keys(data).map(key=>({
        name:key,
        avg: data[key].avg,
        count: data[key].count
    }));

    // ترتيب من الأكبر للأصغر
    arr.sort((a,b)=>b.avg - a.avg);

    // اختيار أفضل 5
    arr.slice(0,5).forEach(u=>{
        const li = document.createElement("li");
        li.innerHTML = `${u.name} - ${u.avg.toFixed(1)} ⭐ (${u.count} تقييم)`;
        topListEl.appendChild(li);
    });
});
</script>

</body>
</html>
